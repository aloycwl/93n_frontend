<!DOCTYPE html>
<html>
  <head>
    <title>93N</title>
    <script src="https://aloycwl.github.io/js/cdn/jquery.min.js"></script>
    <script src="https://aloycwl.github.io/js/cdn/web3.min.js"></script>
    <script src="https://aloycwl.github.io/js/cdn/web3ac.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      .hide {
        display: none;
      }
      a {
        cursor: pointer;
        color: blue;
      }
      input {
        width: 350px;
      }
      i {
        font-size: small;
      }
    </style>
  </head>
  <body>
    <a id="connect" onclick="load();">Connect</a>
    <div id="root" class="hide">
      Referred by: <span id="txtRB"></span><br /><br />
      <a onclick="deposit()">Deposit</a> - Approval first - Deposit next
      <br /><br />
      Referral link (click to copy):
      <input
        readonly
        id="txtRef"
        onclick="navigator.clipboard.writeText($(location).attr('host')+'#'+$(this).val());$('#copied').show()"
      />
      <i id="copied" class="hide">Copied</i><br /><br />
      <a onclick="stake()">Staking update</a><br /><br />
      <p id="p1">USDT available:</p>
      <p id="p2">User's info:</p>
      <p id="p3">Downlines:</p>
    </div>
  </body>
  <script>
    async function load() {
      if (typeof ethereum != 'undefined') {
        web3 = new Web3(ethereum);
        web3 = web3.eth;
        acct = await ethereum.request({ method: 'eth_requestAccounts' });
        frm = { from: acct[0], gas: 21e5 };
        if ((await web3.net.getId()) != 4) {
          await ethereum.request({
            method: 'wallet_switchEthereumChain',
            params: [{ chainId: '0x4' }],
          });
          location.reload();
        }
        contract = new web3.Contract(
          [
            {
              inputs: [
                {
                  internalType: 'address',
                  name: 'referral',
                  type: 'address',
                },
                {
                  internalType: 'uint256',
                  name: 'amount',
                  type: 'uint256',
                },
                {
                  internalType: 'uint256',
                  name: 'months',
                  type: 'uint256',
                },
              ],
              name: 'Deposit',
              outputs: [],
              stateMutability: 'payable',
              type: 'function',
            },
            {
              inputs: [],
              name: 'Staking',
              outputs: [],
              stateMutability: 'nonpayable',
              type: 'function',
            },
            {
              inputs: [
                {
                  internalType: 'address',
                  name: 'a',
                  type: 'address',
                },
              ],
              name: 'getDownlines',
              outputs: [
                {
                  internalType: 'address[]',
                  name: '',
                  type: 'address[]',
                },
              ],
              stateMutability: 'view',
              type: 'function',
            },
            {
              inputs: [
                {
                  internalType: 'address',
                  name: 'a',
                  type: 'address',
                },
              ],
              name: 'getUplines',
              outputs: [
                {
                  internalType: 'address',
                  name: 'd1',
                  type: 'address',
                },
                {
                  internalType: 'address',
                  name: 'd2',
                  type: 'address',
                },
                {
                  internalType: 'address',
                  name: 'd3',
                  type: 'address',
                },
              ],
              stateMutability: 'view',
              type: 'function',
            },
            {
              inputs: [
                {
                  internalType: 'address',
                  name: '',
                  type: 'address',
                },
              ],
              name: 'user',
              outputs: [
                {
                  internalType: 'address',
                  name: 'upline',
                  type: 'address',
                },
                {
                  internalType: 'uint256',
                  name: 'wallet',
                  type: 'uint256',
                },
                {
                  internalType: 'uint256',
                  name: 'lastClaimed',
                  type: 'uint256',
                },
                {
                  internalType: 'uint256',
                  name: 'dateJoined',
                  type: 'uint256',
                },
                {
                  internalType: 'uint256',
                  name: 'months',
                  type: 'uint256',
                },
                {
                  internalType: 'uint256',
                  name: 'balances',
                  type: 'uint256',
                },
              ],
              stateMutability: 'view',
              type: 'function',
            },
          ],
          '0x80BB34c189D43C6c3b3FB8B7921A6A389Ed92198'
        );
        contract = contract.methods;

        contract2 = new web3.Contract(
          [
            {
              inputs: [
                {
                  internalType: 'address',
                  name: 'spender',
                  type: 'address',
                },
                {
                  internalType: 'uint256',
                  name: 'amount',
                  type: 'uint256',
                },
              ],
              name: 'approve',
              outputs: [
                {
                  internalType: 'bool',
                  name: '',
                  type: 'bool',
                },
              ],
              stateMutability: 'nonpayable',
              type: 'function',
            },
            {
              inputs: [
                {
                  internalType: 'address',
                  name: 'account',
                  type: 'address',
                },
              ],
              name: 'balanceOf',
              outputs: [
                {
                  internalType: 'uint256',
                  name: '',
                  type: 'uint256',
                },
              ],
              stateMutability: 'view',
              type: 'function',
            },
          ],
          '0x80BB34c189D43C6c3b3FB8B7921A6A389Ed92198'
        );
        contract2 = contract2.methods;
      }
    }
    async function display() {
      _s = location.hash.substring(1);
      $('#txtRB').html(
        _s.length > 1 && _s != acct[0]
          ? _s
          : '0x0000000000000000000000000000000000000000'
      );
      $('#txtRef').val(acct[0]);
    }
    async function deposit() {
      await contract2
        .approve('0x80BB34c189D43C6c3b3FB8B7921A6A389Ed92198', 1e21)
        .send({
          from: acct[0],
          value: 0.0e18,
        });
      await contract.Deposit(acct[0], 1e21, 9).send({
        from: acct[0],
        value: 0.0e18,
      });
      location.reload();
    }
    async function stake() {
      await contract.Staking().send({
        from: acct[0],
        value: 0.0e18,
      });
      location.reload();
    }
    (async () => {
      await load();
      display();
    })();
    $(document).ready(function () {
      setInterval(async function () {
        if (typeof ethereum != 'undefined') {
          d = await web3.getAccounts();
          if (d.length > 0) {
            $('#connect').hide();
            $('#root').show();
          } else $('#connect').show();
        } else $('#connect').html('No Metamask');
      }, 1000);
    });
  </script>
</html>
